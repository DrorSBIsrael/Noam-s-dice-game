<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>מפת EPCOT - מסע מסביב לעולם</title>
    
    <script src="https://cdn.jsdelivr.net/npm/leaflet@1.6.0/dist/leaflet.js"></script>
    <script src="https://code.jquery.com/jquery-1.12.4.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.js"></script>
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet@1.6.0/dist/leaflet.css"/>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.css"/>
    
    <style>
        body, html {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            direction: rtl;
        }
        
        #map {
            position: absolute;
            top: 0;
            bottom: 0;
            right: 0;
            left: 0;
        }
        
        .popup-content {
            direction: rtl;
            text-align: right;
            min-width: 320px;
            background: white;
            color: black;
        }
        
        .attraction-title {
            font-size: 19px;
            font-weight: bold;
            margin-bottom: 8px;
            color: #000000;
        }
        
        .attraction-category {
            font-size: 15px;
            font-weight: bold;
            margin-bottom: 6px;
            padding: 4px 8px;
            border-radius: 4px;
            display: inline-block;
        }
        
        .future-world { background: #00bcd4; color: white; }
        .world-showcase { background: #ff9800; color: white; }
        .restaurant { background: #4caf50; color: white; }
        .fireworks { background: #e91e63; color: white; }
        
        .attraction-details {
            font-size: 15px;
            margin-bottom: 10px;
            color: #000000;
            line-height: 1.5;
        }
        
        .wait-time {
            font-size: 14px;
            color: #000000;
            margin-bottom: 8px;
            background: #fff3cd;
            padding: 6px;
            border-radius: 4px;
            border-right: 3px solid #ffc107;
        }
        
        .visit-time {
            font-size: 14px;
            color: #000000;
            margin-bottom: 8px;
            background: #d1ecf1;
            padding: 6px;
            border-radius: 4px;
            border-right: 3px solid #17a2b8;
        }
        
        .food-info {
            font-size: 14px;
            color: #000000;
            margin-bottom: 8px;
            background: #d4edda;
            padding: 6px;
            border-radius: 4px;
            border-right: 3px solid #28a745;
        }
        
        .navigation-buttons {
            display: flex;
            gap: 8px;
            margin-top: 10px;
        }
        
        .nav-btn {
            padding: 8px 12px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 13px;
            text-decoration: none;
            display: inline-block;
            color: white;
            text-align: center;
            min-width: 70px;
            font-weight: 500;
        }
        
        .disney-btn {
            background: linear-gradient(135deg, #1e3a8a, #3b82f6);
        }
        
        .order-btn {
            background: linear-gradient(135deg, #059669, #10b981);
        }
        
        .legend-toggle {
            position: absolute;
            top: 10px;
            right: 10px;
            background: #1e3a8a;
            color: white;
            padding: 12px;
            border-radius: 50%;
            cursor: pointer;
            z-index: 1001;
            font-size: 18px;
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
            font-weight: bold;
        }
        
        .legend {
            position: absolute;
            top: 10px;
            right: 10px;
            background: white;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.25);
            z-index: 1000;
            font-size: 12px;
            max-width: 250px;
            border: 2px solid #1e3a8a;
            display: none;
        }
        
        .legend-title {
            font-size: 15px;
            font-weight: bold;
            margin-bottom: 12px;
            color: #1e3a8a;
            text-align: center;
        }
        
        .legend-item {
            margin: 8px 0;
            display: flex;
            align-items: center;
        }
        
        .legend-color {
            width: 18px;
            height: 18px;
            border-radius: 50%;
            margin-left: 8px;
            border: 2px solid white;
            box-shadow: 0 2px 4px rgba(0,0,0,0.4);
        }
        
        .time-strategy {
            position: absolute;
            bottom: 10px;
            left: 10px;
            background: rgba(255,255,255,0.95);
            padding: 12px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            z-index: 1000;
            font-size: 12px;
            max-width: 220px;
            border: 1px solid #e2e8f0;
        }
        
        .strategy-title {
            font-weight: bold;
            color: #1e3a8a;
            margin-bottom: 5px;
            font-size: 13px;
        }
        
        .time-slot {
            margin: 3px 0;
            font-size: 11px;
        }
        
        .park-info {
            position: absolute;
            top: 70px;
            right: 10px;
            background: rgba(30, 58, 138, 0.9);
            color: white;
            padding: 10px;
            border-radius: 8px;
            z-index: 1000;
            font-size: 12px;
            max-width: 180px;
        }
        
        .park-title {
            font-weight: bold;
            margin-bottom: 5px;
            font-size: 13px;
        }
    </style>
</head>
<body>
    <div id="map"></div>
    
    <div class="legend-toggle" onclick="toggleLegend()">
        🌍
    </div>
    
    <div class="legend" id="legend">
        <div class="legend-title">🌍 מקרא EPCOT</div>
        <div class="legend-item">
            <span class="legend-color" style="background-color: #ff0000;"></span>
            <span>⭐⭐⭐ חובה מוחלטת!</span>
        </div>
        <div class="legend-item">
            <span class="legend-color" style="background-color: #ff6600;"></span>
            <span>⭐⭐ מומלץ מאוד</span>
        </div>
        <div class="legend-item">
            <span class="legend-color" style="background-color: #4CAF50;"></span>
            <span>⭐ כדאי אם יש זמן</span>
        </div>
        <div class="legend-item">
            <span class="legend-color" style="background-color: #9C27B0;"></span>
            <span>🍽️ מסעדות ואוכל</span>
        </div>
        <div class="legend-item">
            <span class="legend-color" style="background-color: #2196F3;"></span>
            <span>🌎 מדינות World Showcase</span>
        </div>
        <div class="legend-item">
            <span class="legend-color" style="background-color: #FF1744;"></span>
            <span>🎆 זיקוקים</span>
        </div>
    </div>
    
    <div class="park-info">
        <div class="park-title">🌍 EPCOT</div>
        <div>📍 ליד Pop Century</div>
        <div>⏰ בדרך כלל: 9:00-22:00</div>
        <div>🎫 Genie+ מומלץ!</div>
        <div>🍗 Turkish Chicken בצהריים</div>
    </div>
    
    <div class="time-strategy">
        <div class="strategy-title">⏰ אסטרטגיית היום:</div>
        <div class="time-slot"><strong>8:30:</strong> Frozen Ever After</div>
        <div class="time-slot"><strong>9:30:</strong> Soarin'</div>
        <div class="time-slot"><strong>10:30:</strong> The Seas</div>
        <div class="time-slot"><strong>12:00:</strong> Turkish Chicken 🍗</div>
        <div class="time-slot"><strong>13:30:</strong> World Showcase</div>
        <div class="time-slot"><strong>17:00:</strong> עוד אטרקציות</div>
        <div class="time-slot"><strong>20:00:</strong> זיקוקים! 🎆</div>
    </div>

    <script>
        // יצירת המפה
        var map = L.map('map', {
            center: [28.3747, -81.5489],
            zoom: 15,
            zoomControl: true
        });

        // הוספת שכבת המפה
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: 'Map data © OpenStreetMap contributors',
            maxZoom: 19
        }).addTo(map);

        // פונקציה להצגה/הסתרה של המקרא
        function toggleLegend() {
            var legend = document.getElementById('legend');
            if (legend.style.display === 'none' || legend.style.display === '') {
                legend.style.display = 'block';
            } else {
                legend.style.display = 'none';
            }
        }

        // פונקציה ליצירת תוכן popup
        function createPopupContent(title, category, description, timing, specialInfo = '', tips = '') {
            var content = `
                <div class="popup-content">
                    <div class="attraction-title">${title}</div>
                    <div class="attraction-category ${category.toLowerCase().replace(' ', '-')}">${category}</div>
                    <div class="attraction-details">${description}</div>
                    ${timing ? `<div class="visit-time"><strong>🕐 הזמן הטוב ביותר:</strong> ${timing}</div>` : ''}
                    ${specialInfo ? `<div class="food-info">${specialInfo}</div>` : ''}
                    ${tips ? `<div style="font-size: 13px; color: #000000; margin-bottom: 8px; background: #e8f5e8; padding: 6px; border-radius: 4px;"><strong>💡 טיפ:</strong> ${tips}</div>` : ''}
                    <div class="navigation-buttons">
                        <a href="https://disneyworld.disney.go.com/attractions/" 
                           target="_blank" class="nav-btn disney-btn">אפליקציית דיסני</a>
                    </div>
                </div>
            `;
            return content;
        }

        // נתוני האטרקציות והמסעדות
        var attractions = [
            // Future World - אטרקציות חובה
            {
                coords: [28.3712, -81.5476],
                title: "🧊 Frozen Ever After",
                category: "Future World",
                description: "נסיעה קסומה בעולם פרוזן עם אלזה ואנה. האטרקציה הפופולרית ביותר ב-EPCOT!",
                timing: "8:30 בבוקר - ראשון!",
                tips: "השתמשו ב-Genie+ או בואו מוקדם מאוד. התור הכי ארוך בפארק!",
                color: "red"
            },
            {
                coords: [28.3747, -81.5494],
                title: "✈️ Soarin' Around the World",
                category: "Future World",
                description: "סימולטור טיסה מדהים מעל נופים יפים בעולם. חוויה מרגשת לכל המשפחה!",
                timing: "9:30-10:30 בבוקר",
                tips: "אל תאכלו לפני! יש ריחות מיוחדים בכל יעד שמוסיפים לחוויה",
                color: "red"
            },
            {
                coords: [28.3756, -81.5489],
                title: "🐠 The Seas with Nemo & Friends",
                category: "Future World",
                description: "נסיעה מתחת למים עם נמו ודורי + אקווריום ענק עם דולפינים!",
                timing: "10:30-11:30 בבוקר",
                tips: "אחרי הנסיעה, חובה לבקר באקווריום! יש דולפינים ובעלי חיים ימיים מדהימים",
                color: "orange"
            },
            {
                coords: [28.3738, -81.5503],
                title: "🚗 Test Track",
                category: "Future World",
                description: "עיצבו רכב וצאו לנסיעת מבחן מהירה! מגיעים למהירות של 105 קמ״ש",
                timing: "17:00-18:00 בערב",
                tips: "אם הספקתם - זו חוויה מדהימה! תעצבו רכב ותראו איך הוא מתנהג",
                color: "orange"
            },

            // ארוחת הצהריים - Turkish Chicken
            {
                coords: [28.3723, -81.5465],
                title: "🍗 Turkish Chicken - Tangerine Cafe",
                category: "Restaurant",
                description: "הארוחה שלכם! Turkish Chicken Shawarma במרוקו - טעים ואותנטי",
                timing: "12:00-13:30 - ארוחת צהריים",
                specialInfo: "<strong>🍽️ המנה:</strong> Chicken Shawarma Platter - עוף בתבלינים מרוקאיים עם אורז ופיתה. מחיר: כ-$16",
                tips: "אחד המקומות הטובים לאכול ב-EPCOT! אווירה מרוקאית אמיתית",
                color: "purple"
            },

            // World Showcase - מסע מסביב לעולם
            {
                coords: [28.3715, -81.5445],
                title: "🇲🇽 Mexico - Gran Fiesta Tour",
                category: "World Showcase",
                description: "נסיעה נהדרת במקסיקו עם שלושת הקבלרוס ודונלד דאק",
                timing: "13:30-14:00",
                tips: "האטרקציה במקסיקו נחמדה ומרגיעה. בפנים יש גם מסעדות מקסיקניות טובות",
                color: "blue"
            },
            {
                coords: [28.3725, -81.5448],
                title: "🇨🇳 China - Reflections of China",
                category: "World Showcase",
                description: "סרט 360 מעגלי מדהים על סין - נופים עוצרי נשימה!",
                timing: "14:30-15:00",
                tips: "הסרט מדהים! עומדים במעגל ורואים את כל סין מסביב",
                color: "blue"
            },
            {
                coords: [28.3738, -81.5445],
                title: "🇩🇪 Germany",
                category: "World Showcase",
                description: "כפר גרמני מקסים עם חנויות מיוחדות ובירה גרמנית אמיתית",
                timing: "15:00-15:30",
                tips: "נסו בירה גרמנית או קנו שוקולד גרמני מעולה!",
                color: "blue"
            },
            {
                coords: [28.3748, -81.5448],
                title: "🇮🇹 Italy",
                category: "World Showcase",
                description: "כיכר איטלקית יפיפה עם הג'לאטו הטוב ביותר בכל דיסני!",
                timing: "15:30-16:00",
                tips: "חובה לנסות ג'לאטו! זה הטוב ביותר בכל דיסני וורלד",
                color: "blue"
            },
            {
                coords: [28.3755, -81.5455],
                title: "🇺🇸 American Adventure",
                category: "World Showcase",
                description: "מופע מרגש ומרהיב על ההיסטוריה האמריקנית עם רובוטים מדהימים",
                timing: "16:00-16:30",
                tips: "המופע הטוב ביותר ב-World Showcase! מרגש גם למי שלא אמריקני",
                color: "orange"
            },
            {
                coords: [28.3762, -81.5465],
                title: "🇯🇵 Japan",
                category: "World Showcase",
                description: "גן יפני מדהים עם חנויות יפניות מיוחדות וסושי טעים",
                timing: "16:30-17:00",
                tips: "החנויות יפניות מיוחדות! יש גם מסעדת סושי מעולה",
                color: "blue"
            },
            {
                coords: [28.3765, -81.5475],
                title: "🇫🇷 France",
                category: "World Showcase",
                description: "כפר צרפתי מקסים עם מאפייה צרפתית ומסעדה טובה",
                timing: "17:00-17:30",
                tips: "נסו קרואסון או מקרון צרפתי אמיתי!",
                color: "blue"
            },
            {
                coords: [28.3768, -81.5485],
                title: "🇬🇧 United Kingdom",
                category: "World Showcase",
                description: "פאב אנגלי אמיתי עם פיש אנד צ'יפס מעולה",
                timing: "17:30-18:00",
                tips: "הפיש אנד צ'יפס טעים! אווירה בריטית אמיתית",
                color: "blue"
            },
            {
                coords: [28.3765, -81.5495],
                title: "🇨🇦 Canada - O Canada!",
                category: "World Showcase",
                description: "סרט מעגלי נוסף על קנדה - נופי טבע מדהימים",
                timing: "18:00-18:30",
                tips: "סרט יפה על קנדה! נופים מדהימים של הטבע הקנדי",
                color: "blue"
            },

            // אטרקציות נוספות ב-Future World
            {
                coords: [28.3735, -81.5515],
                title: "🌱 Living with the Land",
                category: "Future World",
                description: "נסיעה מרגיעה בחממות מתקדמות - איך גידולים גדלים בעתיד",
                timing: "11:30-12:00 או 18:30-19:00",
                tips: "אטרקציה מרגיעה ומעניינת! תראו איך מגדלים אוכל בחלל",
                color: "green"
            },
            {
                coords: [28.3742, -81.5520],
                title: "🧪 Imagination with Figment",
                category: "Future World",
                description: "נסיעה משעשעת עם Figment הדרקון הסגול המפורסם",
                timing: "11:00-11:30 או 19:00-19:30",
                tips: "קלאסיקה של EPCOT! Figment הוא הקמע של הפארק",
                color: "green"
            },
            {
                coords: [28.3730, -81.5510],
                title: "🚀 Mission: SPACE",
                category: "Future World",
                description: "סימולטור חלל אינטנסיבי - טיסה למאדים! יש גרסה רגילה ואינטנסיבית",
                timing: "19:30-20:00 (אם אוהבים אקסטרים)",
                tips: "אם רגישים לסחרחורת - קחו את הגרסה הירוקה (פחות אינטנסיבית)",
                color: "green"
            },

            // הזיקוקים
            {
                coords: [28.3745, -81.5470],
                title: "🎆 EPCOT Forever",
                category: "Fireworks",
                description: "מופע זיקוקים מדהים מעל הלגונה! הסיום המושלם ליום ב-EPCOT",
                timing: "20:00-21:00 (בדקו באפליקציה)",
                tips: "בואו 30 דקות מראש למקום טוב! הנוף הטוב ביותר מ-World Showcase",
                color: "darkred"
            }
        ];

        // הוספת המרקרים למפה
        attractions.forEach(function(attraction) {
            var marker = L.marker(attraction.coords).addTo(map);
            
            var icon = L.AwesomeMarkers.icon({
                icon: 'info-sign',
                iconColor: 'white',
                markerColor: attraction.color,
                prefix: 'glyphicon'
            });
            marker.setIcon(icon);

            var popupContent = createPopupContent(
                attraction.title, 
                attraction.category,
                attraction.description, 
                attraction.timing,
                attraction.specialInfo,
                attraction.tips
            );
            
            marker.bindPopup(popupContent, {
                maxWidth: 400,
                className: 'custom-popup'
            });
        });

        // הוספת פונקציונליות נוספת
        map.on('popupopen', function() {
            setTimeout(function() {
                if (map.getPopup()) {
                    map.panTo(map.getPopup().getLatLng());
                }
            }, 100);
        });

    </script>
</body>
</html>
